# Лекция №10. Современный frontend — фреймворки и инструменты сборки

---

## 1. Почему нужен современный frontend?

В первые годы веб-разработки интерфейсы сайтов создавались с помощью «чистого» JavaScript и HTML. Такой подход до сих пор можно встретить в небольших проектах, но по мере роста функциональности он становится крайне неудобным.

> **Современный фронтенд** — это подход к разработке пользовательских интерфейсов, использующий фреймворки, инструменты сборки и лучшие практики для создания масштабируемых и производительных приложений.

**Проблема №1 — рост сложности.**

Когда проект содержит десятки или сотни функций, изменение одной детали в коде может привести к непредсказуемым последствиям. Например, добавление нового блока на страницу нередко требует вручную менять несколько мест в коде.

**Проблема №2 — ручное управление DOM.**

В чистом JavaScript для создания элемента приходится писать что-то вроде:

```javascript
const btn = document.createElement('button');
btn.textContent = 'Нажми меня';
btn.addEventListener('click', () => alert('Привет!'));
document.body.appendChild(btn);
```

Такой код быстро загромождает проект и плохо читается.

**Проблема №3 — отсутствие архитектуры.**

Каждый разработчик решает задачу «по-своему», что приводит к хаотичной структуре. В результате поддержка и доработка проекта становятся трудоемкими.

**Проблема №4 — слабое переиспользование кода.**

В чистом JS нет встроенного способа выделить «компонент» и использовать его в разных местах, как это делается, например, в React или Vue.

### 1.1 Что меняют фреймворки и инструменты сборки

Фреймворк — это набор инструментов и правил, которые помогают организовать код, сделать его читаемым и переиспользуемым. Он берет на себя работу, которую раньше приходилось делать вручную: управление DOM, оптимизацию, структуру проекта.

> **Фреймворк** — это программная платформа, определяющая структуру приложения и предоставляющая готовые решения для типовых задач.

Например, в React создание той же кнопки из примера выше выглядит так:

```javascript
function MyButton() {
  return <button onClick={() => alert('Привет!')}>Нажми меня</button>;
}
```

Мы описываем что должно быть на экране, а фреймворк сам решает как это отобразить в браузере.

**Преимущества подхода с фреймворком:**

1. **Компонентность** — интерфейс разбивается на небольшие части с собственным состоянием и логикой
2. **Реактивность** — при изменении данных интерфейс обновляется автоматически
3. **Экосистема** — готовые решения для роутинга, управления состоянием, анимаций и запросов к серверу
4. **Оптимизация** — автоматическая минификация и удаление неиспользуемого кода
5. **Ускорение разработки** — можно сосредоточиться на бизнес-логике, а не на технических деталях

---

## 2. Обзор популярных фреймворков

Современные фронтенд-фреймворки упрощают создание масштабируемых и быстрых веб-приложений, вводя понятия компонентов и удобное управление состоянием.

**1. React**

React — библиотека от Meta с виртуальным DOM и JSX — расширением JavaScript для удобной работы с разметкой. Основой React являются компоненты и хуки для управления состоянием.

> **React** — это библиотека для создания пользовательских интерфейсов, основанная на компонентном подходе и виртуальном DOM.

**Пример React-компонента:**

```javascript
import React, { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);
  return (
    <button onClick={() => setCount(count + 1)}>
      Нажато {count} раз
    </button>
  );
}
```

**2. Vue (Composition API)**

Vue — прогрессивный фреймворк, поддерживающий реактивность и удобную структуру компонентов. Современный стиль — Composition API, где логика компонента пишется в функции setup, что даёт гибкость и явную работу с реактивностью.

> **Vue** — это прогрессивный фреймворк для создания пользовательских интерфейсов, отличающийся простотой изучения и гибкостью.

**Пример Vue-компонента с Composition API:**

```vue
<template>
  <button @click="increment">Нажато {{ count }} раз</button>
</template>

<script setup>
import { ref } from 'vue';

const count = ref(0);
function increment() {
  count.value++;
}
</script>
```

**3. Angular**

Angular — полноценный фреймворк на TypeScript от Google с MVC-архитектурой и внедрением зависимостей. Компоненты объявляются с декораторами, а шаблоны пишутся в HTML внутри компонента.

> **Angular** — это полнофункциональный фреймворк для построения клиентских приложений, использующий TypeScript и архитектуру MVC.

**Пример Angular-компонента:**

```typescript
import { Component } from '@angular/core';

@Component({
  selector: 'app-counter',
  template: `<button (click)="increment()">Нажато {{ count }} раз</button>`
})
export class CounterComponent {
  count = 0;

  increment() {
    this.count++;
  }
}
```

**Таблица 1 – Сравнение фреймворков**

| Фреймворк | Особенности | Когда выбирать? |
|-----------|-------------|-----------------|
| **React (Meta)** | Виртуальный DOM, JSX, хуки | Гибкость, большое комьюнити, SPA/PWA |
| **Vue (Evan You)** | Реактивность, Single-File Components | Простота, быстрый старт, прогрессивный |
| **Angular (Google)** | TypeScript, MVC, Dependency Injection | Корпоративные приложения, строгая архитектура |

React — самый популярный, но Vue проще для новичков, Angular — для enterprise.

---

## 3. React (как пример фреймворка)

React — это библиотека для создания интерфейсов, разработанная компанией Meta. Главная идея React — разбивать интерфейс на небольшие, независимые компоненты, которые можно легко повторно использовать и комбинировать.

> **React** — это декларативная, эффективная и гибкая JavaScript-библиотека для создания пользовательских интерфейсов.

Компонент в React — это функция, которая возвращает описание интерфейса на языке JSX. JSX похож на HTML, но позволяет использовать JavaScript прямо в разметке. Например, можно выводить данные, использовать условия и циклы.

**Вот простой компонент, который отображает кнопку с текстом, переданным через параметры:**

```javascript
function Button({ text }) {
  return <button>{text}</button>;
}
```

JSX удобен тем, что позволяет вставлять динамические данные в разметку. Например, условный вывод:

```javascript
<div>{isActive ? 'Включено' : 'Выключено'}</div>
```

Для управления состоянием компоненты React используют хуки — специальные функции, которые позволяют сохранять и изменять данные без классов.

> **Хуки** — это функции, которые позволяют использовать состояние и другие возможности React в функциональных компонентах.

Самый популярный хук — `useState`. Он создаёт локальное состояние в функциональном компоненте. Например, счётчик на кнопке:

```javascript
import { useState } from 'react';

function Counter() {
  const [count, setCount] = useState(0);

  return (
    <button onClick={() => setCount(count + 1)}>
      Нажато {count} раз
    </button>
  );
}
```

Когда пользователь нажимает на кнопку, вызывается функция `setCount`, которая обновляет значение счётчика и автоматически обновляет интерфейс.

React оптимизирует работу с DOM через виртуальный DOM — это абстрактное представление интерфейса, которое помогает минимизировать количество изменений в реальном DOM, ускоряя рендеринг.

---

## 4. Инструменты сборки

При разработке современных веб-приложений проект часто состоит из множества файлов: JavaScript-модулей, стилей, изображений и других ресурсов. Просто подключать десятки `<script>` и `<link>` в HTML — неудобно и неэффективно.

> **Инструменты сборки** — это программы, которые преобразуют исходный код проекта в оптимизированные файлы, готовые к развертыванию на сервере.

**Проблемы без сборщика:**

- Большое количество подключаемых файлов замедляет загрузку страницы
- Нет автоматической оптимизации: код не минифицируется, не удаляются неиспользуемые части
- Современный JavaScript может не поддерживаться старыми браузерами, поэтому нужен транслятор (транспайлер)
- Отсутствует удобный dev-сервер с "горячей перезагрузкой" — при изменениях в коде приходится обновлять страницу вручную

**Что делает сборщик?**

Сборщик объединяет все модули и ресурсы в один или несколько файлов, оптимизирует и подготавливает код для запуска в браузере. Ключевые задачи сборщика:

- **Объединение модулей** — вместо множества мелких файлов получается один файл — меньше HTTP-запросов
- **Оптимизация** — удаление неиспользуемого кода (tree-shaking), минификация — уменьшение размера файлов
- **Транспиляция** — преобразование современного JavaScript в более старые версии для поддержки всех браузеров (например, с помощью Babel)
- **Dev-сервер** — автоматический перезапуск и обновление браузера при изменении кода (Hot Reload)

**Таблица 2 - Сборщики**

| Инструмент | Плюсы | Минусы |
|------------|-------|--------|
| **Webpack** | Очень гибкий, множество плагинов | Сложная конфигурация |
| **Vite** | Молниеносная сборка, ES-модули | Меньше возможностей настройки |
| **Parcel** | Практически не требует настройки | Медленнее Vite |

Vite — современный стандарт для новых проектов.

Если не использовать сборщик, веб-страница будет загружать десятки скриптов и стилей, что замедляет загрузку и ухудшает производительность. Кроме того, современные возможности языка и браузеров несовместимы с некоторыми старыми версиями, поэтому код требует трансформации.

**Основные задачи сборщика:**

- **Объединение (бандлинг)** — собирает все модули и зависимости в один или несколько оптимизированных файлов для загрузки
- **Оптимизация** — минифицирует (сжимает) код, удаляет неиспользуемые участки (tree shaking), сокращает размер
- **Транспиляция** — преобразует современный JavaScript (ES6+) в совместимый с большинством браузеров код с помощью Babel или других инструментов
- **Обработка ассетов** — позволяет импортировать CSS, изображения, шрифты и конвертировать их для использования в проекте
- **Запуск dev-сервера** — локальный сервер с поддержкой горячей перезагрузки (Hot Reload), чтобы видеть изменения без ручного обновления страницы

---

## 5. Модули и структура проекта

Современные JavaScript-приложения строятся из модулей — отдельных файлов с кодом, которые можно импортировать и использовать в других местах проекта. Это позволяет структурировать код, улучшать его читаемость и переиспользуемость.

> **Модули** — это отдельные файлы JavaScript, которые могут экспортировать и импортировать функциональность между собой.

**ES-модули:**

ES-модули — стандартный способ организации кода в JavaScript. Они позволяют экспортировать функции, переменные и классы из одного файла и импортировать их в другом.

Например, у нас есть файл `math.js`, где определена функция сложения:

```javascript
// math.js
export const sum = (a, b) => a + b;
```

А в другом файле мы можем использовать эту функцию:

```javascript
// app.js
import { sum } from './math.js';
console.log(sum(2, 3)); // 5
```

Такой подход помогает избегать глобальных переменных и упрощает управление зависимостями.

**Структура React-проекта:**

Для удобства и масштабируемости React-проекты обычно организуют по определённой структуре папок:

```
src/
├── components/   # Переиспользуемые UI-компоненты
├── pages/        # Страницы приложения
├── store/        # Логика состояния, Redux или Zustand
├── utils/        # Вспомогательные функции и утилиты
└── App.js        # Корневой компонент приложения
```

Такое разделение помогает быстро ориентироваться в проекте и облегчает командную работу.

---

## 6. NPM и пакеты

NPM (Node Package Manager) — это система управления пакетами для JavaScript, которая помогает устанавливать, обновлять и управлять сторонними библиотеками и инструментами. Сегодня NPM — неотъемлемая часть работы с любым современным фронтендом.

> **NPM** — это менеджер пакетов для JavaScript, который позволяет устанавливать, обновлять и управлять зависимостями проекта.

**Vite — современный сборщик**

Vite — это быстрый и простой в использовании сборщик, который особенно популярен для проектов на React, Vue и других фреймворках. Он работает на базе ES-модулей и запускает dev-сервер с горячей перезагрузкой (Hot Reload) практически мгновенно.

> **Vite** — это современный инструмент сборки фронтенд-проектов, обеспечивающий быструю разработку за счет использования нативных ES-модулей.

Для создания нового проекта с Vite обычно выполняют:

```bash
npm create vite@latest
```

Затем переходят в папку проекта и устанавливают зависимости:

```bash
cd имя-проекта
npm install
```

Для запуска dev-сервера с автоматической перезагрузкой:

```bash
npm run dev
```

Чтобы собрать проект для продакшена (оптимизированный код):

```bash
npm run build
```

**Таблица 3 – часто используемые команды npm**

| Команда | Описание |
|---------|-----------|
| `npm init -y` | Создаёт новый package.json с настройками по умолчанию |
| `npm install <pkg>` | Устанавливает пакет и добавляет его в зависимости проекта |
| `npm uninstall <pkg>` | Удаляет пакет из проекта |
| `npm update` | Обновляет все зависимости до последних версий |
| `npm run <script>` | Запускает скрипт, указанный в разделе scripts в package.json |