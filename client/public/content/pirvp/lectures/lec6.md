# Лекция №6. Массивы и строки в JavaScript

---

## 1. Массивы в JavaScript

Массив — это упорядоченная коллекция элементов, доступ к которым осуществляется по индексам. В JavaScript массивы могут содержать элементы любых типов: числа, строки, объекты, другие массивы и даже функции.

> **Массив** — это упорядоченная коллекция элементов, где каждый элемент имеет числовой индекс, начинающийся с 0.

### Создание массивов

Массивы можно создать несколькими способами:

```javascript
const arr1 = [1, 2, 3];           // Через литерал массива (рекомендуется)
const arr2 = new Array(4, 5, 6);  // Через конструктор (редко используется)
const arr3 = [];                  // Пустой массив
const mixed = [1, 'текст', true, { name: 'Alex' }, [7, 8]]; // Разные типы данных
```

### Доступ к элементам и длина массива

- Индексация начинается с 0
- Длина массива хранится в свойстве `length`
- Можно изменять элементы по индексу

```javascript
const fruits = ['яблоко', 'банан', 'киви'];
console.log(fruits[0]);     // 'яблоко'
console.log(fruits.length); // 3
fruits[1] = 'апельсин';     // Теперь массив: ['яблоко', 'апельсин', 'киви']
```

### Перебор массива

**1. Цикл for:**
```javascript
for (let i = 0; i < fruits.length; i++) {
  console.log(fruits[i]);
}
```

**2. Цикл for...of:**
```javascript
for (const fruit of fruits) {
  console.log(fruit);
}
```

**3. Метод forEach():**
```javascript
fruits.forEach((fruit, index) => {
  console.log(`${index}: ${fruit}`);
});
```

---

### Основные методы массивов

#### 1. Добавление и удаление элементов

- **`push()`** — добавляет элемент в конец
- **`pop()`** — удаляет последний элемент
- **`unshift()`** — добавляет элемент в начало
- **`shift()`** — удаляет первый элемент

```javascript
const nums = [1, 2];
nums.push(3);      // [1, 2, 3]
nums.pop();        // [1, 2]
nums.unshift(0);   // [0, 1, 2]
nums.shift();      // [1, 2]
```

#### 2. Поиск и проверка элементов

- **`includes()`** — проверяет наличие элемента
- **`indexOf()`** — возвращает индекс первого вхождения
- **`lastIndexOf()`** — возвращает индекс последнего вхождения

```javascript
[1, 2, 3].includes(2);        // true
[1, 2, 3].indexOf(2);         // 1
[1, 2, 2, 3].lastIndexOf(2);  // 2
```

#### 3. Изменение массива

- **`splice(start, deleteCount, ...items)`** — удаляет и/или добавляет элементы
- **`slice(start, end)`** — возвращает копию части массива
- **`reverse()`** — переворачивает массив
- **`sort()`** — сортирует (по умолчанию как строки)

```javascript
const letters = ['b', 'a', 'c'];
letters.sort(); // ['a', 'b', 'c']

const numbers = [10, 2, 30];
numbers.sort(); // [10, 2, 30] (строковая сортировка)
numbers.sort((a, b) => a - b); // [2, 10, 30] (числовая сортировка)
```

#### 4. Преобразование массива

- **`join()`** — объединяет элементы в строку
- **`concat()`** — объединяет массивы
- **`toString()`** — преобразует массив в строку
- **`flat(depth)`** — «разглаживает» вложенные массивы

```javascript
[1, 2, 3].join(' - ');       // "1 - 2 - 3"
[1, 2].concat([3, 4]);       // [1, 2, 3, 4]
[[1, 2], [3]].flat();        // [1, 2, 3]
```

#### 5. Фильтрация и преобразование

- **`filter(fn)`** — возвращает новый массив по условию
- **`map(fn)`** — применяет функцию к каждому элементу
- **`reduce(fn, initial)`** — сводит массив к одному значению
- **`find(fn)`** — находит первый подходящий элемент
- **`findIndex(fn)`** — возвращает индекс первого подходящего элемента

```javascript
[1, 2, 3].filter(x => x > 1);        // [2, 3]
[1, 2, 3].map(x => x * 2);           // [2, 4, 6]
[1, 2, 3].reduce((sum, x) => sum + x, 0); // 6
[1, 2, 3].find(x => x === 2);        // 2
```

#### 6. Проверка элементов (every и some)

- **`every(fn)`** — проверяет, все ли элементы соответствуют условию
- **`some(fn)`** — проверяет, есть ли хотя бы один подходящий элемент

```javascript
[1, 2, 3].every(x => x > 0);  // true
[1, 2, 3].some(x => x === 2); // true
```

---

### Особенности массивов в JavaScript

- Массивы — это объекты с числовыми ключами
- Могут иметь «дыры» (разреженные массивы):

```javascript
const arr = [];
arr[3] = 'x';
console.log(arr.length); // 4 (но элементы 0, 1, 2 — undefined)
```

- Проверка на массив:

```javascript
Array.isArray(arr); // true (лучший способ)
typeof arr; // 'object' (не подходит)
```

---

## 2. Строки в JavaScript

Строка — это последовательность символов, используемая для хранения и обработки текста. В JavaScript строки можно создавать с помощью:
- одинарных кавычек `'...'`
- двойных кавычек `"..."`
- обратных кавычек `` `...` `` (шаблонные строки)

> **Строка** — это примитивный тип данных, представляющий последовательность символов Unicode.

```javascript
const str1 = 'Привет';
const str2 = "Мир";
const str3 = `Привет, ${str2}!`; // Шаблонная строка с интерполяцией
```

---

### 2.1. Основные свойства и доступ к символам

- **Длина строки** — свойство `length`
- **Доступ к символам** — по индексу (начинается с 0)

```javascript
const text = "JavaScript";

console.log(text.length);      // 10
console.log(text[0]);         // "J" (как в массивах)
console.log(text.charAt(1));  // "a" (старый метод)
console.log(text.at(-1));     // "t" (новый метод, поддержка отрицательных индексов)
```

---

### 2.2. Извлечение подстрок

- **`slice(start, end)`** — возвращает часть строки от start до end (не включая)
- **`substring(start, end)`** — аналогично slice, но корректно обрабатывает отрицательные индексы
- **`substr(start, length)`** — устарел, возвращает подстроку с указанной длины

```javascript
const str = "frontend";

console.log(str.slice(0, 5));      // "front"
console.log(str.substring(1, 4));  // "ron"
console.log(str.substr(0, 4));     // "fron" (устаревший)
```

---

### 2.3. Поиск в строке

- **`includes(substr)`** — проверяет, содержит ли строка подстроку
- **`startsWith(substr)`** — начинается ли строка с подстроки
- **`endsWith(substr)`** — заканчивается ли строка подстрокой
- **`indexOf(substr)`** — возвращает индекс первого вхождения
- **`lastIndexOf(substr)`** — возвращает индекс последнего вхождения

```javascript
const phrase = "JavaScript — это круто!";

console.log(phrase.includes("круто"));    // true
console.log(phrase.startsWith("Java"));   // true
console.log(phrase.endsWith("!"));        // true
console.log(phrase.indexOf("Script"));    // 4
console.log(phrase.lastIndexOf("о"));     // 19
```

---

### 2.4. Изменение регистра

- **`toLowerCase()`** — преобразует строку в нижний регистр
- **`toUpperCase()`** — преобразует строку в верхний регистр

```javascript
console.log("ПрИвЕт".toLowerCase()); // "привет"
console.log("hello".toUpperCase());  // "HELLO"
```

---

### 2.5. Замена и очистка строк

- **`replace(old, new)`** — заменяет первое вхождение подстроки
- **`replaceAll(old, new)`** — заменяет все вхождения подстроки
- **`trim()`** — удаляет пробелы с обоих концов
- **`trimStart()` / `trimEnd()`** — удаляет пробелы только в начале или конце

```javascript
const msg = "   Я люблю JavaScript   ";

console.log(msg.replace("люблю", "обожаю"));  // "Я обожаю JavaScript"
console.log(msg.replaceAll(" ", ""));         // "ЯлюблюJavaScript"
console.log(msg.trim());                      // "Я люблю JavaScript"
```

---

### 2.6. Объединение и повторение

- **Конкатенация (+)** — сложение строк
- **`repeat(n)`** — повторяет строку n раз
- **`join()`** (для массивов) — объединяет элементы массива в строку

```javascript
console.log("Hello" + " " + "World");   // "Hello World"
console.log("JS".repeat(3));            // "JSJSJS"
console.log(["Hello", "World"].join(" ")); // "Hello World"
```

---

### 2.7. Сравнение строк

Строки сравниваются посимвольно по их Unicode-кодам.

- Регистр имеет значение (`"A" !== "a"`)
- Пустая строка `""` меньше любого символа

```javascript
console.log("apple" > "banana");  // false (сравнение 'a' и 'b')
console.log("Привет" === "привет"); // false (регистр важен)
```

---

### 2.8. Шаблонные строки (Template Literals)

Позволяют:
- Вставлять переменные через `${...}`
- Создавать многострочные строки без `\n`

```javascript
const name = "Оля";
const age = 25;

const message = `
  Привет, меня зовут ${name}, 
  мне ${age} лет.
`;

console.log(message);
// Привет, меня зовут Оля,
// мне 25 лет.
```

---

### 2.9. Работа с символами и Unicode

- **`charCodeAt(index)`** — возвращает Unicode-код символа
- **`String.fromCharCode(code)`** — создаёт символ по коду

```javascript
console.log("abc".charCodeAt(0));  // 97 (код 'a')
console.log(String.fromCharCode(97)); // 'a'
```

---

### 2.10. Полезные методы (краткая шпаргалка)

| Метод | Действие |
|-------|----------|
| `str.length` | Возвращает длину строки |
| `str.slice()` | Извлекает часть строки |
| `str.includes()` | Проверяет наличие подстроки |
| `str.indexOf()` | Ищет индекс первого вхождения подстроки |
| `str.toUpperCase()` | Преобразует строку в верхний регистр |
| `str.toLowerCase()` | Преобразует строку в нижний регистр |
| `str.trim()` | Удаляет пробелы с обоих концов |
| `str.replace()` | Заменяет подстроку |
| `str.repeat()` | Повторяет строку указанное количество раз |